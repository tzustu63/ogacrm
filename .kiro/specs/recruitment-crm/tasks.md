# 招生CRM系統實作計劃

- [x] 1. 建立專案結構和核心介面
  - 創建Node.js/Express後端專案結構
  - 設定TypeScript配置和開發環境
  - 建立資料庫連線和基本中介軟體
  - 設定JWT認證系統
  - _需求: 7.3_

- [x] 1.1 設定測試框架
  - 配置Jest和fast-check測試環境
  - 建立測試資料庫配置
  - 創建測試工具和輔助函數
  - _需求: 所有測試相關需求_

- [x] 2. 實作資料模型和驗證
  - [x] 2.1 創建核心資料模型介面
    - 實作School、Contact、Interaction、Partnership、Preference TypeScript介面
    - 建立列舉類型(SchoolType、RelationshipStatus、ContactMethod、MOUStatus)
    - 實作資料驗證函數
    - _需求: 1.1, 1.2, 2.1, 2.2_

  - [x] 2.2 撰寫資料模型屬性測試
    - **屬性 1: 學校資料完整性**
    - **驗證需求: 1.1, 1.3, 1.4, 1.5**

  - [x] 2.3 撰寫電郵驗證屬性測試
    - **屬性 2: 電郵格式驗證**
    - **驗證需求: 2.2**

  - [x] 2.4 實作資料庫模式和遷移
    - 創建PostgreSQL資料表結構
    - 實作資料庫遷移腳本
    - 建立索引和約束條件
    - _需求: 1.3, 2.3, 3.1_

- [x] 3. 建立資料存取層
  - [x] 3.1 實作基礎Repository模式
    - 創建BaseRepository抽象類別
    - 實作CRUD操作的通用方法
    - 建立資料庫連線管理
    - _需求: 1.3, 1.4, 1.5_

  - [x] 3.2 實作SchoolRepository
    - 創建學校資料的CRUD操作
    - 實作學校搜尋和篩選功能
    - 建立學校資料驗證邏輯
    - _需求: 1.1, 1.3, 1.4, 1.5, 6.1, 6.2_

  - [x] 3.3 撰寫學校資料存取屬性測試
    - **屬性 1: 學校資料完整性**
    - **驗證需求: 1.1, 1.3, 1.4, 1.5**

  - [x] 3.4 實作ContactRepository
    - 創建聯絡人資料的CRUD操作
    - 實作聯絡人與學校的關聯邏輯
    - 建立聯絡人資料驗證
    - _需求: 2.1, 2.3, 2.4, 2.5_

  - [x] 3.5 撰寫聯絡人關聯屬性測試
    - **屬性 3: 聯絡人關聯一致性**
    - **驗證需求: 2.1, 2.3, 2.4, 2.5**

- [x] 4. 實作互動記錄管理
  - [x] 4.1 實作InteractionRepository
    - 創建互動記錄的CRUD操作
    - 實作時間序列管理邏輯
    - 建立關係狀態更新機制
    - _需求: 3.1, 3.2, 3.3, 3.4, 3.5_

  - [x] 4.2 撰寫互動記錄時間序列屬性測試
    - **屬性 4: 互動記錄時間序列**
    - **驗證需求: 3.1, 3.2, 3.3, 3.4**

  - [x] 4.3 撰寫關係狀態同步屬性測試
    - **屬性 5: 關係狀態同步**
    - **驗證需求: 3.5**

- [x] 5. 實作合作管理功能
  - [x] 5.1 實作PartnershipRepository
    - 創建合作資訊的CRUD操作
    - 實作MOU狀態管理邏輯
    - 建立數值累計功能(推薦學生數、說明會次數)
    - _需求: 4.1, 4.2, 4.4, 4.5_

  - [x] 5.2 撰寫MOU狀態驗證屬性測試
    - **屬性 6: MOU狀態驗證**
    - **驗證需求: 4.2**

  - [x] 5.3 撰寫數值累計屬性測試
    - **屬性 8: 數值累計正確性**
    - **驗證需求: 4.4, 4.5**

  - [x] 5.4 實作MOU到期提醒系統
    - 創建到期日期檢查邏輯
    - 實作提醒通知機制
    - 建立定期檢查排程
    - _需求: 4.3_

  - [x] 5.5 撰寫MOU到期提醒屬性測試
    - **屬性 7: MOU到期提醒**
    - **驗證需求: 4.3**

- [x] 6. 實作偏好設定管理
  - [x] 6.1 實作PreferenceRepository
    - 創建偏好設定的CRUD操作
    - 實作時區處理邏輯
    - 建立多選科系管理功能
    - _需求: 5.1, 5.2, 5.3, 5.4_

  - [x] 6.2 撰寫偏好設定屬性測試
    - **屬性 9: 偏好設定儲存**
    - **驗證需求: 5.1, 5.2, 5.3, 5.4**

- [x] 7. 實作搜尋和篩選引擎
  - [x] 7.1 實作SearchEngine服務
    - 創建全文搜尋功能
    - 實作多條件篩選邏輯
    - 建立搜尋結果排序機制
    - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

  - [x] 7.2 撰寫搜尋結果正確性屬性測試
    - **屬性 10: 搜尋結果正確性**
    - **驗證需求: 6.1, 6.2, 6.3, 6.4**

  - [x] 7.3 撰寫篩選重置屬性測試
    - **屬性 11: 篩選重置一致性**
    - **驗證需求: 6.5**

- [x] 8. 建立API端點
  - [x] 8.1 實作學校管理API
    - 創建學校CRUD的RESTful端點
    - 實作請求驗證和錯誤處理
    - 建立API文件和範例
    - _需求: 1.1, 1.3, 1.4, 1.5_

  - [x] 8.2 實作聯絡人管理API
    - 創建聯絡人CRUD的RESTful端點
    - 實作關聯驗證邏輯
    - 建立批次操作支援
    - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

  - [x] 8.3 實作互動記錄API
    - 創建互動記錄的RESTful端點
    - 實作時間序列查詢功能
    - 建立統計資料端點
    - _需求: 3.1, 3.2, 3.3, 3.4, 3.5_

  - [x] 8.4 實作搜尋和篩選API
    - 創建搜尋查詢端點
    - 實作進階篩選功能
    - 建立分頁和排序支援
    - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 9. 實作安全性和資料保護
  - [x] 9.1 實作認證和授權系統
    - 建立JWT token管理
    - 實作使用者角色和權限
    - 創建存取日誌記錄
    - _需求: 7.3_

  - [x] 9.2 撰寫資料安全性屬性測試
    - **屬性 12: 資料安全性**
    - **驗證需求: 7.2, 7.3**

  - [x] 9.3 實作資料加密和保護
    - 建立敏感資料加密機制
    - 實作資料遮罩功能
    - 創建安全傳輸協定
    - _需求: 7.2_

- [x] 10. 實作資料備份和復原
  - [x] 10.1 建立備份系統
    - 實作自動資料備份機制
    - 創建備份檔案管理
    - 建立備份驗證功能
    - _需求: 7.4_

  - [x] 10.2 實作資料復原功能
    - 創建資料復原介面
    - 實作選擇性復原邏輯
    - 建立復原驗證機制
    - _需求: 7.4_

  - [x] 10.3 撰寫備份復原屬性測試
    - **屬性 13: 資料備份復原**
    - **驗證需求: 7.4**

- [x] 11. 實作資料匯出功能
  - [x] 11.1 建立資料匯出服務
    - 實作多格式匯出支援(CSV, Excel, JSON)
    - 創建自訂欄位選擇功能
    - 建立大量資料處理機制
    - _需求: 7.5_

  - [x] 11.2 撰寫匯出資料完整性屬性測試
    - **屬性 14: 匯出資料完整性**
    - **驗證需求: 7.5**

- [ ] 12. 第一次檢查點 - 確保所有測試通過
  - 確保所有測試通過，如有問題請詢問使用者

- [x] 13. 建立前端基礎架構
  - [x] 13.1 設定React專案
    - 創建React TypeScript專案
    - 配置路由和狀態管理
    - 設定UI元件庫和樣式系統
    - _需求: 1.2, 4.1, 5.5_

  - [x] 13.2 實作API客戶端
    - 創建HTTP客戶端服務
    - 實作API錯誤處理
    - 建立請求攔截器和認證
    - _需求: 7.3_

- [x] 14. 實作核心UI組件
  - [x] 14.1 實作學校管理介面
    - 創建學校列表和詳細頁面
    - 實作學校新增和編輯表單
    - 建立學校資訊顯示組件
    - _需求: 1.1, 1.2, 1.4, 1.5_

  - [x] 14.2 實作聯絡人管理介面
    - 創建聯絡人列表和編輯功能
    - 實作聯絡人與學校關聯顯示
    - 建立聯絡人快速新增功能
    - _需求: 2.1, 2.2, 2.4, 2.5_

  - [x] 14.3 實作互動記錄介面
    - 創建互動歷史時間軸顯示
    - 實作互動記錄新增表單
    - 建立關係狀態更新介面
    - _需求: 3.1, 3.4, 3.5_

- [x] 15. 實作進階功能介面
  - [x] 15.1 實作搜尋和篩選介面
    - 創建搜尋輸入和結果顯示
    - 實作進階篩選面板
    - 建立搜尋結果排序功能
    - _需求: 6.1, 6.2, 6.3, 6.5_

  - [x] 15.2 實作合作管理介面
    - 創建MOU狀態管理面板
    - 實作到期提醒顯示
    - 建立統計資料儀表板
    - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

  - [x] 15.3 實作偏好設定介面
    - 創建偏好設定編輯表單
    - 實作時區選擇器
    - 建立科系多選組件
    - _需求: 5.1, 5.2, 5.3, 5.4_

- [ ] 16. 整合測試和優化
  - [x] 16.1 實作端到端測試
    - 創建主要使用者流程測試
    - 實作跨瀏覽器相容性測試
    - 建立效能基準測試
    - _需求: 所有功能需求_

  - [x] 16.2 撰寫整合測試
    - 測試API與前端的整合
    - 驗證資料流的完整性
    - 測試錯誤處理流程
    - _需求: 所有功能需求_

- [ ] 17. 最終檢查點 - 確保所有測試通過
  - 確保所有測試通過，如有問題請詢問使用者